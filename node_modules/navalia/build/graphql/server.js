"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express = require("express");
const graphqlHTTP = require("express-graphql");
const schema_1 = require("./schema");
const ChromeLoader_1 = require("./ChromeLoader");
const start = (port = 4000) => {
    const app = express();
    app.use('/', graphqlHTTP(() => {
        const start = Date.now();
        return {
            schema: schema_1.schema,
            graphiql: true,
            context: {
                loader: new ChromeLoader_1.ChromeLoader(),
            },
            extensions: () => ({
                time: Date.now() - start,
            }),
        };
    }));
    app.listen(port, () => console.log(`Navalia is ready at: http://127.0.0.1:${port}`));
};
if (module.parent) {
    module.exports.start = start;
}
else {
    start();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2dyYXBocWwvc2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQW1DO0FBQ25DLCtDQUErQztBQUUvQyxxQ0FBa0M7QUFDbEMsaURBQThDO0FBRTlDLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxFQUFFO0lBQzVCLE1BQU0sR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFDO0lBRXRCLEdBQUcsQ0FBQyxHQUFHLENBQ0wsR0FBRyxFQUNILFdBQVcsQ0FBQyxHQUFHLEVBQUU7UUFDZixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFekIsTUFBTSxDQUFDO1lBQ0wsTUFBTSxFQUFOLGVBQU07WUFDTixRQUFRLEVBQUUsSUFBSTtZQUNkLE9BQU8sRUFBRTtnQkFDUCxNQUFNLEVBQUUsSUFBSSwyQkFBWSxFQUFFO2FBQzNCO1lBQ0QsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSzthQUN6QixDQUFDO1NBQ0gsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUNILENBQUM7SUFFRixHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5Q0FBeUMsSUFBSSxFQUFFLENBQUMsQ0FDN0QsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ2xCLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUMvQixDQUFDO0FBQUMsSUFBSSxDQUFDLENBQUM7SUFDTixLQUFLLEVBQUUsQ0FBQztBQUNWLENBQUMifQ==